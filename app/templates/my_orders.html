{% extends "base.html" %}
{% block title %}Mis pedidos{% endblock %}
{% block content %}
<h2 class="h4">Mis pedidos</h2>
<div class="table-responsive">
<table class="table">
  <thead><tr><th>#</th><th>Fecha</th><th>Estado</th><th>Total</th><th>Acciones</th></tr></thead>
  <tbody>
  {% for o in orders %}
  <tr>
    <td>{{ o.id }}</td>
    <td>{{ o.created_at.strftime('%Y-%m-%d %H:%M') }}</td>
    <td>
      {% if o.status == 'paid' %}
        <span class="badge bg-info">Pagado</span>
      {% elif o.status == 'pending' %}
        <span class="badge bg-warning text-dark">Pendiente</span>
      {% elif o.status == 'shipped' %}
        <span class="badge bg-primary">Enviado</span>
      {% elif o.status == 'delivered' %}
        <span class="badge bg-success">Entregado</span>
      {% elif o.status == 'cancelled' %}
        <span class="badge bg-danger">Cancelado</span>
      {% else %}
        <span class="badge bg-secondary">{{ o.status }}</span>
      {% endif %}
    </td>
    <td>${{ '%.0f'|format(o.total or 0) }}</td>
    <td>
      <a class="btn btn-sm btn-outline-info" href="{{ url_for('orders_invoice.invoice', order_id=o.id) }}">
        Descargar factura
      </a>
    </td>
  </tr>
  {% else %}
  <tr><td colspan="5" class="text-center">No tienes pedidos.</td></tr>
  {% endfor %}
  </tbody>
</table>
</div>
{% endblock %}